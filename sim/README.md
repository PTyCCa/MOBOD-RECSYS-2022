# Sim

Симулятор поведения пользователей рекомендательного сервиса.
Реализован как среда OpenAI gym.

Запуск симулятора поделен на условные "дни".
В конце каждого дня симулятор останавливается, чтобы была возможность обработать данные, собранные за предыдущий день и обновить сервис рекомендаций.
Самый общий подход к работе с симулятором такой:
1. Разворачиваем сервис-рекомендер в режиме холодного старта
2. Запускаем симулятор на один день
3. Пока симулятор остановлен, анализируем собранные данные, строим модели 
4. Обновляем сервис-рекомендер
5. Повторяем пункты 2-4 при необходимости

## Инструкция

1. Создаем чистый env с python 3.7
2. Устанавливаем зависимости
   ```
   pip install -r requirements.txt
   ``` 
3. Добавляем текущую директорию в $PYTHONPATH
   ```
   export PYTHONPATH=${PYTHONPATH}:.
   ```
4. Симулятор можно запустить в "ручном" режиме, чтобы самостоятельно подбирать рекомендации для пользователя. 
   Это режим для ознакомления с симулятором.
   ```
   python sim/run.py --episodes 1 --recommender console --config config/env.yml --seed 31337
   ```
5. Запуск симулятора в режиме "трафика".
   Параметр `--episodes` определяет число сгенерированных пользовательских сессий.
   ```
   python sim/run.py --episodes 1000 --recommender remote --config config/env.yml --seed 31337
   ```
   
## Идеи на будущее

- Долгосрочное счастье пользователей: сделать так чтобы, пользователь мог уйти навсегда
- Хайповые треки для каждого из дней
- Многопоточный запуск симулятора
